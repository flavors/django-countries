language: python
dist: trusty

python:
  - '2.7'
  - '3.4'
  - '3.5'
  - '3.6'

addons:
  postgresql: '9.6'
  apt:
    packages:
      - postgresql-9.6-postgis-2.3

  code_climate:
    repo_token:
      secure: 'd4yq1CoOwBTBN8/OFXDVR7aF3cfCC9VfL6nSwpiCykLlYK41aTy7+Rqr1WPszR6o7zU9hB3znDAIZ/EJ2Q65FWmyeuSlyfQ38a9vwglITSxOQ2jduT2GlUpW3P6OKti0zPOT3sgJM'

before_install:
  - sudo apt-get update -qq
  - sudo apt-get install -y gdal-bin

install:
  - pip install tox tox-travis

before_script:
  - psql -U postgres -c 'CREATE EXTENSION postgis'
  - psql -U postgres -c 'CREATE DATABASE test;'

script:
  - tox

after_success:
  - pip install codecov
  - codecov
